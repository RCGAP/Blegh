<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>I Can Relate</title>
</head>
<body>
    <div class="container">
        <div>
            <h2 class="title" id="author"></h2>
            <p class="lyrics" id="text"></p>
            <div class="links">
                <div class="spotify" id="spotify"></div>
                    <div class="button-box">
                        <button class="button--green" id="relate">
                        I can relate
                        </button>
                        <button class="button--red" id="dontRelate">
                        I don't relate
                        </button>
                    </div>
                </div>
            </div>

    
</body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    
    // SCRIPT


    //Array contenant les morceaux
    const QUOTES = [
        {
            quote: 'Im scared to get close and I hate being alone</br> I long for that feeling to not feel at all </br> The higher I get, the lower Ill sink </br> I cant drown my demons, they know how to swim',
            origin: 'Bring me the horizon - Can You Feel My Heart',
            spotify: '<iframe src=https://open.spotify.com/embed/track/0WSa1sucoNRcEeULlZVQXj?si=UV397rmbS-CgEBIP2hJB_Q width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>',
        },
        {
            quote: "BLEGH",
            origin: 'INWARD - Last Relapse',
            spotify: '<audio controls src="Blegh.wav"></audio>',
        }

    ];


    //Will be used as values to call on when displaying the quote data for the user
    let currentQuote = '';
    let currentOrigin = '';
    let currentSpotify = '';

    function getRandomQuote() {
        return QUOTES[Math.floor(Math.random() * QUOTES.length)];
    }


    function getQuote() {

        let randomQuote = getRandomQuote();
        currentQuote = randomQuote.quote;
        currentOrigin = randomQuote.origin;
        currentSpotify = randomQuote.spotify;


        //Current = ce qui est afficher
        $('.lyrics').animate(
            { opacity: 0 },
            500,
            function () {
                $(this).animate(
                    { opacity: 1 },
                    500
                );
                $('#text').html(currentQuote);
            }
        );

        $('.title').animate(
            { opacity: 0 },
            500,
            function () {
                $(this).animate(
                    { opacity: 1 },
                    500
                );
                $('#author').text(currentOrigin);
            }
        );
        $('.spotify').animate(
            { opacity: 0 },
            500,
            function () {
                $(this).animate(
                    { opacity: 1 },
                    500
                );
                $('#spotify').html(currentSpotify);
            }
        );
    }

    $(document).ready(getQuote);

    $('#relate').click(getQuote);
    
    $('#dontRelate').click(getQuote);

    $('#document').click(function () {
        window.open(
            "https://twitter.com/intent/tweet?text=" + currentQuote + ' -' + currentOrigin + ' -' + currentSpotify
        );
        return null;
    });</script>
    </html>
